{% extends 'base.html' %}

{% block title %}Alumni Career Path - Beta Lab Laboratory{% endblock %}
 {% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static "css/devenir.css" %}">
{% endblock %}

{% block header_content %}
<div class="page-header animated-gradient">
    <h1 class="page-title fade-in">Alumni Career Path</h1>
    <div class="header-line"></div>
    <p class="page-subtitle fade-in delay-200">Discover the journey of former members after leaving the laboratory</p>
</div>

{% endblock %}

{% block content %}
<section class="devenir-filters">
    <div class="container">
        <div class="filter-grid">
            <div class="filter-group">
                <h3>Filter by field</h3>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="domaine" data-value="all">All</button>
                    {% for domaine in domaines %}
                    <button class="filter-btn" data-filter="domaine" data-value="{{ domaine }}">{{ domaine }}</button>
                    {% endfor %}
                </div>
            </div>
            
            <div class="filter-group">
                <h3>Filter by departure year</h3>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="annee" data-value="all">All</button>
                    {% for annee in annees %}
                    <button class="filter-btn" data-filter="annee" data-value="{{ annee }}">{{ annee }}</button>
                    {% endfor %}
                </div>
            </div>
            
            <div class="filter-group">
                <h3>Type of organization</h3>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="structure" data-value="all">All</button>
                    <button class="filter-btn" data-filter="structure" data-value="academique">Academic</button>
                    <button class="filter-btn" data-filter="structure" data-value="industrie">Industry</button>
                    <button class="filter-btn" data-filter="structure" data-value="startup">Startup</button>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="devenir-statistics">
    <div class="container">
        <h2>Statistics and distribution</h2>
        <div class="stats-grid">
            <div class="stats-card">
                <div class="stats-number">{{ nb_membres }}</div>
                <div class="stats-label">Alumni tracked</div>
            </div>
            
            <div class="stats-card">
                <div class="stats-number">{{ nb_domaines }}</div>
                <div class="stats-label">Activity fields</div>
            </div>
            
            <div class="stats-card">
                <div class="stats-number">{{ nb_lieux }}</div>
                <div class="stats-label">Different locations</div>
            </div>
        </div>
        
        <div class="stats-chart">
            <h3>Distribution by activity sector</h3>
            <div class="chart-wrapper">
                <!-- Ici, on pourrait intÃ©grer un graphique avec Chart.js -->
                <div class="placeholder-chart">
                    <div class="chart-segment academique" style="width: {{ pct_academique }}%;">
                        <span>Academic</span>
                    </div>
                    <div class="chart-segment industrie" style="width: {{ pct_industrie }}%;">
                        <span>Industry</span>
                    </div>
                    <div class="chart-segment startup" style="width: {{ pct_startup }}%;">
                        <span>Startup</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="devenir-members">
    <div class="container">
        <h2>Alumni career paths</h2>
        
        {% if devenirs %}
        <div class="members-grid">
            {% for devenir in devenirs %}
            <div class="member-card" 
                 data-domaine="{{ devenir.domaine }}" 
                 data-annee="{{ devenir.membre.date_depart|date:'Y' }}" 
                 data-structure="{{ devenir.type_structure }}">
                <div class="member-header">
                    <div class="member-photo">
                        {% if devenir.membre.photo %}
                            <img src="{{ devenir.membre.photo.url }}" alt="{{ devenir.membre.user.first_name }} {{ devenir.membre.user.last_name }}">
                        {% else %}
                            <div class="default-avatar">{{ devenir.membre.user.first_name|first }}{{ devenir.membre.user.last_name|first }}</div>
                        {% endif %}
                    </div>
                    <div class="member-identity">
                        <h3>{{ devenir.membre.user.first_name }} {{ devenir.membre.user.last_name }}</h3>
                        <p class="member-dates">
                            <span>At the laboratory: {{ devenir.membre.date_arrivee|date:"F Y" }} - {{ devenir.membre.date_depart|date:"F Y" }}</span>
                        </p>
                    </div>
                </div>
                <div class="member-current">
                    <div class="current-position">
                        <div class="position-company">{{ devenir.entreprise }}</div>
                        <div class="position-title">{{ devenir.poste }}</div>
                        <div class="position-meta">
                            <span><i class="fas fa-map-marker-alt"></i> {{ devenir.lieu }}</span>
                            <span><i class="fas fa-briefcase"></i> {{ devenir.domaine }}</span>
                            <span><i class="far fa-calendar-alt"></i> Since {{ devenir.date_debut|date:"F Y" }}</span>
                        </div>
                    </div>
                </div>
                <div class="member-description">
                    <p>{{ devenir.description|truncatechars:200 }}</p>
                </div>
                <div class="member-footer">
                    <a href="{% url 'labo:membre_detail' devenir.membre.id %}" class="btn-profile">View full profile</a>
                    {% if devenir.lien %}
                    <a href="{{ devenir.lien }}" target="_blank" class="btn-website"><i class="fas fa-external-link-alt"></i></a>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-message">
            <p>No information about alumni career paths is available at the moment.</p>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script src="{% static "js/devenir.js" %} "></script>
{% endblock %}